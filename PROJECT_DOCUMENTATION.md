# Apple Store Helper é¡¹ç›®æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [æ ¸å¿ƒæµç¨‹](#æ ¸å¿ƒæµç¨‹)
- [æ•°æ®ç®¡ç†](#æ•°æ®ç®¡ç†)
- [API æ¥å£](#api-æ¥å£)
- [ç”¨æˆ·ç•Œé¢](#ç”¨æˆ·ç•Œé¢)
- [æ¨é€ç³»ç»Ÿ](#æ¨é€ç³»ç»Ÿ)
- [éƒ¨ç½²è¯´æ˜](#éƒ¨ç½²è¯´æ˜)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®ç®€ä»‹
Apple Store Helperï¼ˆæŠ¢ä½ å¦¹ï¼‰æ˜¯ä¸€ä¸ªåŸºäº Go è¯­è¨€å¼€å‘çš„ Apple äº§å“åº“å­˜ç›‘æ§å·¥å…·ï¼Œèƒ½å¤Ÿå®æ—¶ç›‘æ§ Apple Store çš„åº“å­˜çŠ¶æ€ï¼Œå¹¶é€šè¿‡ Bark æ¨é€åŠæ—¶é€šçŸ¥ç”¨æˆ·ã€‚

### æ ¸å¿ƒåŠŸèƒ½
- **å®æ—¶åº“å­˜ç›‘æ§**ï¼šè‡ªåŠ¨æ‰«æ Apple Store åº“å­˜çŠ¶æ€
- **å¤šåœ°åŒºæ”¯æŒ**ï¼šæ”¯æŒ 7 ä¸ªä¸»è¦åœ°åŒºçš„ Apple Store
- **æ™ºèƒ½æ¨é€**ï¼šé›†æˆ Bark æ¨é€æœåŠ¡ï¼Œç¬¬ä¸€æ—¶é—´é€šçŸ¥ç”¨æˆ·
- **ç‹¬ç«‹è¿è¡Œ**ï¼šä½¿ç”¨ Go embed æŠ€æœ¯ï¼Œæ— éœ€å¤–éƒ¨æ•°æ®æ–‡ä»¶
- **ç”¨æˆ·å‹å¥½**ï¼šåŸºäº Fyne æ¡†æ¶çš„ç°ä»£åŒ– GUI ç•Œé¢

### æŠ€æœ¯æ ˆ
- **åç«¯è¯­è¨€**ï¼šGo 1.17+
- **GUI æ¡†æ¶**ï¼šFyne v2
- **æ•°æ®å­˜å‚¨**ï¼šJSON + Go embed
- **ç½‘ç»œè¯·æ±‚**ï¼šæ ‡å‡†åº“ + gorequest
- **æ¨é€æœåŠ¡**ï¼šBark API
- **éŸ³é¢‘æ’­æ”¾**ï¼šbeep åº“

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Apple Store Helper                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Presentation Layer (Fyne GUI)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   Main UI   â”‚ â”‚  Settings   â”‚ â”‚  Monitoring â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Business Logic Layer                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   Product   â”‚ â”‚    Store    â”‚ â”‚   Listen    â”‚          â”‚
â”‚  â”‚   Service   â”‚ â”‚   Service   â”‚ â”‚   Service   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Data Layer                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Embedded   â”‚ â”‚   Product   â”‚ â”‚   Store     â”‚          â”‚
â”‚  â”‚    Data     â”‚ â”‚   Fetcher   â”‚ â”‚   Fetcher   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  External Services                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Apple APIs  â”‚ â”‚  Bark API   â”‚ â”‚  HTTP APIs  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

#### 1. è¡¨ç¤ºå±‚ (Presentation Layer)
- **Main UI**ï¼šä¸»ç•Œé¢ï¼Œäº§å“é€‰æ‹©å’Œç›‘æ§æ§åˆ¶
- **Settings UI**ï¼šè®¾ç½®ç•Œé¢ï¼Œé…ç½®æ¨é€å’Œç›‘æ§å‚æ•°
- **Monitoring UI**ï¼šç›‘æ§çŠ¶æ€æ˜¾ç¤ºå’Œæ—¥å¿—è¾“å‡º

#### 2. ä¸šåŠ¡é€»è¾‘å±‚ (Business Logic Layer)
- **Product Service**ï¼šäº§å“æ•°æ®ç®¡ç†å’ŒæŸ¥è¯¢
- **Store Service**ï¼šé—¨åº—æ•°æ®ç®¡ç†å’ŒæŸ¥è¯¢
- **Listen Service**ï¼šç›‘æ§é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†

#### 3. æ•°æ®å±‚ (Data Layer)
- **Embedded Data**ï¼šåµŒå…¥çš„é™æ€æ•°æ®
- **Product Fetcher**ï¼šäº§å“æ•°æ®è·å–å’Œè§£æ
- **Store Fetcher**ï¼šé—¨åº—æ•°æ®è·å–å’Œè§£æ

## ğŸ“ é¡¹ç›®ç»“æ„

```
apple-store-helper-15/
â”œâ”€â”€ main.go                    # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ go.mod                     # Go æ¨¡å—å®šä¹‰
â”œâ”€â”€ go.sum                     # ä¾èµ–ç‰ˆæœ¬é”å®š
â”œâ”€â”€ README.md                  # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ PROJECT_DOCUMENTATION.md   # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ LICENSE                    # è®¸å¯è¯
â”œâ”€â”€ apple-store-helper         # ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶
â”‚
â”œâ”€â”€ common/                    # å…¬å…±æ¨¡å—
â”‚   â””â”€â”€ const.go              # å¸¸é‡å®šä¹‰
â”‚
â”œâ”€â”€ model/                     # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ area.go               # åœ°åŒºæ¨¡å‹
â”‚   â”œâ”€â”€ product.go            # äº§å“æ¨¡å‹
â”‚   â”œâ”€â”€ store.go              # é—¨åº—æ¨¡å‹
â”‚   â”œâ”€â”€ china_location.go     # ä¸­å›½åœ°åŒºæ•°æ®
â”‚   â”œâ”€â”€ china_stores.go       # ä¸­å›½é—¨åº—æ•°æ®
â”‚   â”œâ”€â”€ global_stores.go      # å…¨çƒé—¨åº—æ•°æ®
â”‚   â””â”€â”€ product_structure.go  # äº§å“ç»“æ„å®šä¹‰
â”‚
â”œâ”€â”€ services/                  # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ product.go            # äº§å“æœåŠ¡
â”‚   â”œâ”€â”€ store.go              # é—¨åº—æœåŠ¡
â”‚   â”œâ”€â”€ listen.go             # ç›‘æ§æœåŠ¡
â”‚   â”œâ”€â”€ area.go               # åœ°åŒºæœåŠ¡
â”‚   â”œâ”€â”€ setting.go            # è®¾ç½®æœåŠ¡
â”‚   â”œâ”€â”€ product_fetcher.go    # äº§å“æ•°æ®è·å–
â”‚   â””â”€â”€ store_fetcher.go      # é—¨åº—æ•°æ®è·å–
â”‚
â”œâ”€â”€ view/                      # è§†å›¾å±‚
â”‚   â”œâ”€â”€ view.go               # è§†å›¾å®šä¹‰
â”‚   â””â”€â”€ custom_select.go      # è‡ªå®šä¹‰é€‰æ‹©ç»„ä»¶
â”‚
â”œâ”€â”€ theme/                     # ä¸»é¢˜å’Œèµ„æº
â”‚   â”œâ”€â”€ theme.go              # ä¸»é¢˜å®šä¹‰
â”‚   â”œâ”€â”€ bundle.go             # èµ„æºæ‰“åŒ…
â”‚   â”œâ”€â”€ font/                 # å­—ä½“æ–‡ä»¶
â”‚   â””â”€â”€ mp3/                  # éŸ³é¢‘æ–‡ä»¶
â”‚
â”œâ”€â”€ embedded/                  # åµŒå…¥æ•°æ®
â”‚   â”œâ”€â”€ embedded_data.go      # åµŒå…¥æ•°æ®å®šä¹‰
â”‚   â””â”€â”€ data/                 # æ•°æ®æ–‡ä»¶
â”‚       â”œâ”€â”€ product/          # äº§å“æ•°æ®
â”‚       â””â”€â”€ store/            # é—¨åº—æ•°æ®
â”‚
â””â”€â”€ data/                      # åŸå§‹æ•°æ®ï¼ˆå¼€å‘ç”¨ï¼‰
    â”œâ”€â”€ product/              # äº§å“æ•°æ®
    â”œâ”€â”€ store/                # é—¨åº—æ•°æ®
    â””â”€â”€ config/               # é…ç½®æ–‡ä»¶
```

## ğŸ”„ æ ¸å¿ƒæµç¨‹

### 1. ç¨‹åºå¯åŠ¨æµç¨‹

```mermaid
graph TD
    A[ç¨‹åºå¯åŠ¨] --> B[åˆå§‹åŒ– Fyne åº”ç”¨]
    B --> C[åŠ è½½ä¸»é¢˜å’Œèµ„æº]
    C --> D[åˆå§‹åŒ–æœåŠ¡å±‚]
    D --> E[åŠ è½½åµŒå…¥æ•°æ®]
    E --> F[æ„å»ºç”¨æˆ·ç•Œé¢]
    F --> G[æ˜¾ç¤ºä¸»çª—å£]
    G --> H[ç­‰å¾…ç”¨æˆ·æ“ä½œ]
```

### 2. æ•°æ®åŠ è½½æµç¨‹

```mermaid
graph TD
    A[é€‰æ‹©åœ°åŒº] --> B{æ£€æŸ¥åµŒå…¥æ•°æ®}
    B -->|å­˜åœ¨| C[ä»åµŒå…¥æ•°æ®åŠ è½½]
    B -->|ä¸å­˜åœ¨| D[ä»æ–‡ä»¶ç³»ç»ŸåŠ è½½]
    C --> E[è§£æäº§å“æ•°æ®]
    D --> E
    E --> F[è§£æé—¨åº—æ•°æ®]
    F --> G[æ›´æ–° UI é€‰é¡¹]
    G --> H[ç”¨æˆ·é€‰æ‹©äº§å“]
```

### 3. ç›‘æ§æµç¨‹

```mermaid
graph TD
    A[å¼€å§‹ç›‘æ§] --> B[éªŒè¯é…ç½®]
    B --> C[å¯åŠ¨ç›‘æ§åç¨‹]
    C --> D[æ„å»º API è¯·æ±‚]
    D --> E[å‘é€ HTTP è¯·æ±‚]
    E --> F{è¯·æ±‚æˆåŠŸ?}
    F -->|æ˜¯| G[è§£æå“åº”æ•°æ®]
    F -->|å¦| H[è®°å½•é”™è¯¯æ—¥å¿—]
    G --> I{æœ‰åº“å­˜?}
    I -->|æ˜¯| J[å‘é€æ¨é€é€šçŸ¥]
    I -->|å¦| K[ç­‰å¾…ä¸‹æ¬¡æ‰«æ]
    J --> L[æ’­æ”¾æé†’éŸ³]
    L --> M[æ›´æ–°ç›‘æ§çŠ¶æ€]
    K --> N[ç­‰å¾…æ‰«æé—´éš”]
    N --> D
    H --> N
```

### 4. æ¨é€æµç¨‹

```mermaid
graph TD
    A[æ£€æµ‹åˆ°åº“å­˜] --> B[æ„å»ºæ¨é€æ¶ˆæ¯]
    B --> C[è°ƒç”¨ Bark API]
    C --> D{æ¨é€æˆåŠŸ?}
    D -->|æ˜¯| E[è®°å½•æ¨é€æ—¥å¿—]
    D -->|å¦| F[é‡è¯•æ¨é€]
    F --> G{é‡è¯•æ¬¡æ•°<3?}
    G -->|æ˜¯| C
    G -->|å¦| H[è®°å½•æ¨é€å¤±è´¥]
    E --> I[æ’­æ”¾æé†’éŸ³]
    H --> I
    I --> J[æ›´æ–° UI çŠ¶æ€]
```

## ğŸ’¾ æ•°æ®ç®¡ç†

### æ•°æ®æ¶æ„

#### 1. äº§å“æ•°æ®ç»“æ„
```go
type ProductData struct {
    UpdateTime string                         `json:"update_time"`
    AreaCode   string                         `json:"area_code"`
    Products   map[string][]ProductInfo       `json:"products"`
}

type ProductInfo struct {
    Model    string `json:"Model"`
    Capacity string `json:"Capacity"`
    Color    string `json:"Color"`
    Code     string `json:"Code"`
    Type     string `json:"Type"`
}
```

#### 2. é—¨åº—æ•°æ®ç»“æ„
```go
type StoreData struct {
    UpdateTime string  `json:"update_time"`
    AreaCode   string  `json:"area_code"`
    Stores     []Store `json:"stores"`
}

type Store struct {
    StoreNumber   string `json:"StoreNumber"`
    CityStoreName string `json:"CityStoreName"`
    Province      string `json:"Province"`
    City          string `json:"City"`
    District      string `json:"District"`
}
```

### æ•°æ®åµŒå…¥æœºåˆ¶

#### 1. Go Embed å®ç°
```go
//go:embed data/product/product_data_cn.json
var ProductDataCN []byte

//go:embed data/store/store_cn.json
var StoreDataCN []byte

var ProductDataMap = map[string][]byte{
    "cn": ProductDataCN,
    "hk": ProductDataHK,
    // ... å…¶ä»–åœ°åŒº
}
```

#### 2. æ•°æ®åŠ è½½ç­–ç•¥
1. **ä¼˜å…ˆä»åµŒå…¥æ•°æ®åŠ è½½**ï¼šå¯åŠ¨æ—¶ç›´æ¥è®¿é—®å†…å­˜ä¸­çš„æ•°æ®
2. **æ–‡ä»¶ç³»ç»Ÿå›é€€**ï¼šå¦‚æœåµŒå…¥æ•°æ®ä¸å­˜åœ¨ï¼Œä»æ–‡ä»¶ç³»ç»ŸåŠ è½½
3. **ç½‘ç»œè·å–**ï¼šå¦‚æœæœ¬åœ°æ•°æ®ä¸å­˜åœ¨ï¼Œä» Apple API è·å–

### æ•°æ®æ›´æ–°æµç¨‹

```mermaid
graph TD
    A[æ•°æ®æ›´æ–°è¯·æ±‚] --> B[æ£€æŸ¥ç½‘ç»œè¿æ¥]
    B --> C[è°ƒç”¨ Apple API]
    C --> D[è§£æå“åº”æ•°æ®]
    D --> E[éªŒè¯æ•°æ®æ ¼å¼]
    E --> F[ä¿å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿ]
    F --> G[æ›´æ–°å†…å­˜ç¼“å­˜]
    G --> H[é€šçŸ¥ UI æ›´æ–°]
```

## ğŸŒ API æ¥å£

### Apple Store API

#### 1. äº§å“æ•°æ® API
```
GET https://www.apple.com/{region}/shop/buy-iphone/iphone-16
```

**è¯·æ±‚å¤´**ï¼š
```
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8
Referer: https://www.apple.com/{region}/shop/buy-iphone/iphone-16
```

#### 2. åº“å­˜æŸ¥è¯¢ API
```
GET https://www.apple.com/{region}/shop/fulfillment-messages
```

**å‚æ•°**ï¼š
- `fae=true`ï¼šå¯ç”¨åº“å­˜æŸ¥è¯¢
- `pl=true`ï¼šå¯ç”¨ä½ç½®æŸ¥è¯¢
- `mts.0=regular`ï¼šæŸ¥è¯¢å¸¸è§„åº“å­˜
- `parts.0={product_code}`ï¼šäº§å“ä»£ç 
- `location={location}`ï¼šä½ç½®ä¿¡æ¯

#### 3. é—¨åº—æŸ¥è¯¢ API
```
GET https://www.apple.com/{region}/shop/address-lookup
```

### Bark æ¨é€ API

#### æ¨é€æ¥å£
```
POST https://api.day.app/{device_key}
```

**è¯·æ±‚ä½“**ï¼š
```json
{
    "title": "åº“å­˜æé†’",
    "body": "iPhone 16 Pro æœ‰åº“å­˜ï¼",
    "url": "https://www.apple.com/shop/buy-iphone/iphone-16-pro"
}
```

## ğŸ–¥ï¸ ç”¨æˆ·ç•Œé¢

### ç•Œé¢æ¶æ„

#### 1. ä¸»ç•Œé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æŠ¢ä½ å¦¹ - Apple äº§å“åº“å­˜ç›‘æ§å·¥å…·                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åœ°åŒºé€‰æ‹©: [ä¸‹æ‹‰æ¡†] äº§å“å‹å·: [ä¸‹æ‹‰æ¡†]                  â”‚
â”‚ å®¹é‡/å°ºå¯¸: [ä¸‹æ‹‰æ¡†] é¢œè‰²: [ä¸‹æ‹‰æ¡†]                     â”‚
â”‚ é—¨åº—é€‰æ‹©: [ä¸‹æ‹‰æ¡†]                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Bark æ¨é€: [è¾“å…¥æ¡†] [æµ‹è¯•æ¨é€]                         â”‚
â”‚ æé†’æ–¹å¼: â—‹ é€šçŸ¥æ¨é€  â—‹ æŒç»­å“é“ƒ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å¼€å§‹ç›‘æ§] [åœæ­¢ç›‘æ§] [æ›´æ–°æ•°æ®]                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç›‘æ§çŠ¶æ€: æœªå¼€å§‹                                       â”‚
â”‚ æ—¥å¿—è¾“å‡º: [æ»šåŠ¨åŒºåŸŸ]                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. ç»„ä»¶è¯´æ˜

**åœ°åŒºé€‰æ‹©å™¨**ï¼š
- æ”¯æŒ 7 ä¸ªåœ°åŒº
- è‡ªåŠ¨åŠ è½½å¯¹åº”æ•°æ®
- åŠ¨æ€æ›´æ–°äº§å“é€‰é¡¹

**äº§å“é€‰æ‹©å™¨**ï¼š
- å‹å· â†’ å®¹é‡/å°ºå¯¸ â†’ é¢œè‰²
- çº§è”é€‰æ‹©é€»è¾‘
- å®æ—¶éªŒè¯é€‰æ‹©

**é—¨åº—é€‰æ‹©å™¨**ï¼š
- ä¸­å›½å¤§é™†ï¼šçœä»½ â†’ åŸå¸‚ â†’ é—¨åº—
- å…¶ä»–åœ°åŒºï¼šç›´æ¥é€‰æ‹©é—¨åº—
- æ”¯æŒæœç´¢å’Œç­›é€‰

**ç›‘æ§æ§åˆ¶**ï¼š
- å¼€å§‹/åœæ­¢ç›‘æ§
- å®æ—¶çŠ¶æ€æ˜¾ç¤º
- æ—¥å¿—è¾“å‡ºåŒºåŸŸ

### ç•Œé¢äº¤äº’æµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·é€‰æ‹©åœ°åŒº] --> B[åŠ è½½äº§å“æ•°æ®]
    B --> C[ç”¨æˆ·é€‰æ‹©äº§å“]
    C --> D[ç”¨æˆ·é€‰æ‹©é—¨åº—]
    D --> E[é…ç½®æ¨é€è®¾ç½®]
    E --> F[å¼€å§‹ç›‘æ§]
    F --> G[æ˜¾ç¤ºç›‘æ§çŠ¶æ€]
    G --> H[æ£€æµ‹åˆ°åº“å­˜]
    H --> I[å‘é€æ¨é€é€šçŸ¥]
    I --> J[æ’­æ”¾æé†’éŸ³]
    J --> K[æ›´æ–°ç•Œé¢çŠ¶æ€]
```

## ğŸ“± æ¨é€ç³»ç»Ÿ

### Bark æ¨é€é›†æˆ

#### 1. æ¨é€é…ç½®
```go
type PushConfig struct {
    BarkURL     string `json:"bark_url"`
    NotifyMode  string `json:"notify_mode"`  // "notification" | "ring"
    TestMode    bool   `json:"test_mode"`
}
```

#### 2. æ¨é€æ¶ˆæ¯æ„å»º
```go
func buildPushMessage(product, store, url string) map[string]string {
    return map[string]string{
        "title": "ğŸ‰ åº“å­˜æé†’",
        "body":  fmt.Sprintf("%s åœ¨ %s æœ‰åº“å­˜ï¼", product, store),
        "url":   url,
        "sound": "bell",
    }
}
```

#### 3. æ¨é€å‘é€
```go
func sendPushNotification(config PushConfig, message map[string]string) error {
    url := fmt.Sprintf("https://api.day.app/%s", config.BarkURL)
    resp, err := http.PostForm(url, message)
    // å¤„ç†å“åº”...
}
```

### éŸ³é¢‘æé†’ç³»ç»Ÿ

#### 1. éŸ³é¢‘æ’­æ”¾
```go
func playNotificationSound() {
    // ä½¿ç”¨ beep åº“æ’­æ”¾ MP3 æ–‡ä»¶
    streamer, format, err := mp3.Decode(audioFile)
    speaker.Play(beep.Seq(streamer, beep.Callback(func() {
        streamer.Close()
    })))
}
```

#### 2. æé†’æ¨¡å¼
- **é€šçŸ¥æ¨é€**ï¼šé™é»˜æ¨é€ï¼Œé€‚åˆåŠå…¬ç¯å¢ƒ
- **æŒç»­å“é“ƒ**ï¼šæŒç»­æ’­æ”¾æé†’éŸ³ï¼Œç¡®ä¿ä¸é”™è¿‡

## ğŸš€ éƒ¨ç½²è¯´æ˜

### ç¼–è¯‘é…ç½®

#### 1. å¼€å‘ç¯å¢ƒç¼–è¯‘
```bash
# å®‰è£…ä¾èµ–
go mod tidy

# ç¼–è¯‘ç¨‹åº
go build -o apple-store-helper .

# è¿è¡Œç¨‹åº
./apple-store-helper
```

#### 2. ç”Ÿäº§ç¯å¢ƒç¼–è¯‘
```bash
# ä¼˜åŒ–ç¼–è¯‘
go build -ldflags="-s -w" -o apple-store-helper .

# å‹ç¼©å¯æ‰§è¡Œæ–‡ä»¶
upx apple-store-helper
```

#### 3. è·¨å¹³å°ç¼–è¯‘
```bash
# macOS
GOOS=darwin GOARCH=amd64 go build -o apple-store-helper-macOS .

# Windows
GOOS=windows GOARCH=amd64 go build -o apple-store-helper.exe .

# Linux
GOOS=linux GOARCH=amd64 go build -o apple-store-helper-linux .
```

### æ‰“åŒ…åˆ†å‘

#### 1. macOS åº”ç”¨åŒ…
```bash
# åˆ›å»ºåº”ç”¨åŒ…ç»“æ„
mkdir -p AppleStoreHelper.app/Contents/MacOS
mkdir -p AppleStoreHelper.app/Contents/Resources

# å¤åˆ¶å¯æ‰§è¡Œæ–‡ä»¶
cp apple-store-helper AppleStoreHelper.app/Contents/MacOS/

# åˆ›å»º Info.plist
cat > AppleStoreHelper.app/Contents/Info.plist << EOF
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleExecutable</key>
    <string>apple-store-helper</string>
    <key>CFBundleIdentifier</key>
    <string>com.example.apple-store-helper</string>
    <key>CFBundleName</key>
    <string>Apple Store Helper</string>
    <key>CFBundleVersion</key>
    <string>1.6.2</string>
</dict>
</plist>
EOF
```

#### 2. å®‰è£…åŒ…åˆ¶ä½œ
```bash
# ä½¿ç”¨ pkgbuild åˆ›å»ºå®‰è£…åŒ…
pkgbuild --root AppleStoreHelper.app --identifier com.example.apple-store-helper --version 1.6.2 AppleStoreHelper.pkg
```

## ğŸ‘¨â€ğŸ’» å¼€å‘æŒ‡å—

### å¼€å‘ç¯å¢ƒè®¾ç½®

#### 1. ç¯å¢ƒè¦æ±‚
- Go 1.17+
- Git
- ä»£ç ç¼–è¾‘å™¨ï¼ˆæ¨è VS Codeï¼‰

#### 2. é¡¹ç›®è®¾ç½®
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-repo/apple-store-helper.git
cd apple-store-helper

# å®‰è£…ä¾èµ–
go mod tidy

# è¿è¡Œæµ‹è¯•
go test ./...

# è¿è¡Œç¨‹åº
go run main.go
```

### ä»£ç è§„èŒƒ

#### 1. å‘½åè§„èŒƒ
- **åŒ…å**ï¼šå°å†™å­—æ¯ï¼Œç®€çŸ­æœ‰æ„ä¹‰
- **å‡½æ•°å**ï¼šé©¼å³°å‘½åï¼ŒåŠ¨è¯å¼€å¤´
- **å˜é‡å**ï¼šé©¼å³°å‘½åï¼Œåè¯å¼€å¤´
- **å¸¸é‡å**ï¼šå…¨å¤§å†™ï¼Œä¸‹åˆ’çº¿åˆ†éš”

#### 2. æ³¨é‡Šè§„èŒƒ
```go
// Package services æä¾›ä¸šåŠ¡é€»è¾‘æœåŠ¡
package services

// ProductService ç®¡ç†äº§å“æ•°æ®
type ProductService struct {
    // products å­˜å‚¨äº§å“æ•°æ®
    products map[string][]Product
}

// LoadProduct åŠ è½½æŒ‡å®šåœ°åŒºçš„äº§å“æ•°æ®
// å‚æ•°:
//   - areaCode: åœ°åŒºä»£ç ï¼Œå¦‚ "cn", "us"
// è¿”å›:
//   - error: åŠ è½½å¤±è´¥æ—¶è¿”å›é”™è¯¯ä¿¡æ¯
func (s *ProductService) LoadProduct(areaCode string) error {
    // å®ç°é€»è¾‘...
}
```

#### 3. é”™è¯¯å¤„ç†
```go
func processData() error {
    data, err := fetchData()
    if err != nil {
        return fmt.Errorf("failed to fetch data: %w", err)
    }
    
    if err := validateData(data); err != nil {
        return fmt.Errorf("invalid data: %w", err)
    }
    
    return nil
}
```

### æµ‹è¯•æŒ‡å—

#### 1. å•å…ƒæµ‹è¯•
```go
func TestProductService_LoadProduct(t *testing.T) {
    service := NewProductService()
    
    tests := []struct {
        name     string
        areaCode string
        wantErr  bool
    }{
        {"valid area", "cn", false},
        {"invalid area", "xx", true},
    }
    
    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            err := service.LoadProduct(tt.areaCode)
            if (err != nil) != tt.wantErr {
                t.Errorf("LoadProduct() error = %v, wantErr %v", err, tt.wantErr)
            }
        })
    }
}
```

#### 2. é›†æˆæµ‹è¯•
```go
func TestIntegration_Monitoring(t *testing.T) {
    // è®¾ç½®æµ‹è¯•ç¯å¢ƒ
    config := &Config{
        AreaCode: "cn",
        Product:  "iPhone 16 Pro",
        Store:    "åŒ—äº¬-ç‹åºœäº•",
    }
    
    // å¯åŠ¨ç›‘æ§
    monitor := NewMonitor(config)
    go monitor.Start()
    
    // ç­‰å¾…ç»“æœ
    select {
    case result := <-monitor.Results():
        // éªŒè¯ç»“æœ
        assert.NotNil(t, result)
    case <-time.After(30 * time.Second):
        t.Fatal("monitoring timeout")
    }
}
```

### æ€§èƒ½ä¼˜åŒ–

#### 1. å†…å­˜ä¼˜åŒ–
- ä½¿ç”¨å¯¹è±¡æ± å‡å°‘ GC å‹åŠ›
- åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„èµ„æº
- é¿å…å†…å­˜æ³„æ¼

#### 2. ç½‘ç»œä¼˜åŒ–
- ä½¿ç”¨è¿æ¥æ± å¤ç”¨è¿æ¥
- è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´
- å®ç°é‡è¯•æœºåˆ¶

#### 3. å¹¶å‘ä¼˜åŒ–
- ä½¿ç”¨åç¨‹æ± æ§åˆ¶å¹¶å‘æ•°
- é¿å…ç«æ€æ¡ä»¶
- åˆç†ä½¿ç”¨é”æœºåˆ¶

## ğŸ“ˆ é¡¹ç›®ç»Ÿè®¡

### ä»£ç ç»Ÿè®¡
- **æ€»è¡Œæ•°**ï¼šçº¦ 3000 è¡Œ
- **Go æ–‡ä»¶**ï¼š25 ä¸ª
- **æµ‹è¯•æ–‡ä»¶**ï¼š5 ä¸ª
- **æ–‡æ¡£æ–‡ä»¶**ï¼š3 ä¸ª

### åŠŸèƒ½ç»Ÿè®¡
- **æ”¯æŒåœ°åŒº**ï¼š7 ä¸ª
- **æ”¯æŒäº§å“**ï¼š40+ ä¸ªç³»åˆ—
- **æ”¯æŒé—¨åº—**ï¼š400+ ä¸ª
- **API æ¥å£**ï¼š10+ ä¸ª

### æ€§èƒ½æŒ‡æ ‡
- **å¯åŠ¨æ—¶é—´**ï¼š< 2 ç§’
- **å†…å­˜å ç”¨**ï¼š< 50MB
- **CPU å ç”¨**ï¼š< 5%
- **ç½‘ç»œå»¶è¿Ÿ**ï¼š< 1 ç§’

---

## ğŸ“ è”ç³»æ–¹å¼

- **é¡¹ç›®åœ°å€**ï¼šhttps://github.com/your-repo/apple-store-helper
- **é—®é¢˜åé¦ˆ**ï¼šhttps://github.com/your-repo/apple-store-helper/issues
- **åŠŸèƒ½å»ºè®®**ï¼šhttps://github.com/your-repo/apple-store-helper/discussions
- **é‚®ç®±**ï¼šyour-email@example.com

---

*æœ€åæ›´æ–°ï¼š2025-09-11*
